# Вариант 26

`1.	Реализовать хранимую процедуру, возвращающую текстовую строку, содержащую информацию о предприятии(идентификатор, название, область, дата, название подстанции и сумма к оплате для последнего потребления). Обработать ситуацию, когда предприятие ничего не потребляло.`

![alt text](image.png)

*Примеры использования:*

`1) Предприятие есть и оно делало покупки:`
![alt text](image-1.png)

`2) Предприятие есть, но покупок не делало:`

![alt text](image-2.png)

`3) Предприятия нет:`

![alt text](image-3.png)

`2. Добавить таблицу, содержащую списки подстанций, с которыми работают предприятия. При вводе потребление проверять предприятие (можно ли ему работать с данной подстанцией).`

![alt text](image-4.png)

![alt text](image-21.png)

*Примеры использования*

`Успешная вставка:`

![alt text](image-6.png)

`Попытка вставить запись, когда предприятие не может работать с данной подстанцией:`

![alt text](image-7.png)

`3. Реализовать триггер такой, что при вводе строки в таблице потребления, если стоимость не указана, то она вычисляется.`

![alt text](image-8.png)

*Примеры использования:*

`1) Вставка с неуказанным payment:`

![alt text](image-9.png)

`2) Вставка с указанным вручную payment:`

![alt text](image-10.png)

`3) Вставка с отсутствием данных для расчёта:`

![alt text](image-11.png)


`4. Создать представление (view), содержащее поля: № и дата потребления, название предприятия и подстанции, временной интервал, скидка и стоимость к оплате. Обеспечить возможность изменения скидки. При этом должна быть пересчитана стоимость к оплате.`

![alt text](image-12.png)

![alt text](image-13.png)

![alt text](image-14.png)

*Примеры использования:*


![alt text](image-16.png)

`Изменение скидки через представление`

![alt text](image-17.png)

![alt text](image-18.png)

![alt text](image-19.png)

`Если попытаться обновить запись без указания нового значения скидки, сработает проверка:`

![alt text](image-20.png)